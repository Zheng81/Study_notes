# Lombok 的中的错误

在使用 Lombok 的时候，虽然它能大大的使得我们的代码变得简洁，但同时它也是有所缺陷的。Lombok 它仅仅是利用 Java 语言在编译时的空档期，使用一种很取巧的方式，将我们所需要的方式注入（写入）到当前的类中，这种过程很像在 hack 我们的代码，只是能满足代码的简洁（个人的装逼）。

## Lombok 的痛点

### 一、JDK 版本问题

在使用 Lombok 的使用，由于 Lombok 对于代码有很强的侵入性，可以会影响对 JDK 的升级。

因为 Lombok 作为一个第三方工具，并且由开源团队维护的，所以它的迭代速度是无法保证的，如果我们需要升级到某个新版本的 JDK 的时候，若其中的特性在 Lombok 中不支持的话就会受到影响。（例如：从现有项目的 JDK 从 Java 8升级到 Java 11时，Lombok不能正常使用等）

### 二、破坏封装性

如果在代码中直接使用 Lombok，那么它会自动帮我们生成 getter、setter  等方法，这就意味着，一个类中的所有参数都自动提供了设置和读取方法。

```java
@Data

public class ShoppingCart { 

    //商品数目
    private int itemsCount; 

    //总价格
    private double totalPrice; 

    //商品明细
    private List items = new ArrayList<>();

}

//例子来源于《极客时间-设计模式之美》
```

我们知道，购物车中商品数目、商品明细以及总价格三者之前其实是有关联关系的，如果需要修改的话是要一起修改的。

但是，我们使用了Lombok的@Data注解，对于itemsCount 和 totalPrice这两个属性。虽然我们将它们定义成 private 类型，但是提供了 public 的 getter、setter 方法。

外部可以通过 setter 方法随意地修改这两个属性的值。我们可以随意调用 setter 方法，来重新设置 itemsCount、totalPrice 属性的值，这也会导致其跟 items 属性的值不一致。

而面向对象封装的定义是：通过访问权限控制，隐藏内部数据，外部仅能通过类提供的有限的接口访问、修改内部数据。所以，暴露不应该暴露的 setter 方法，明显违反了面向对象的封装特性。

好的做法应该是不提供getter/setter，而是只提供一个public的addItem方法，同时去修改itemsCount、totalPrice以及items三个属性。	

### 三、可读性差

Lombok 隐藏了 JavaBean 封装的细节，如果你使用 @AllArgsConstructor 注解，它将提供一个巨型构造器，让外界有机会在初始化对象时修改类中所有的属性。首先，这是极其不安全的，因为类中某系属性我们是不希望被修改的；另外，如果某个类中有几十个属性存在，就会有一个包含几十个参数的构造器被 Lombok 注入到类中，这是不理智的行为；其次，构造器参数的顺序完全由 Lombok 所控制，我们并不能操控，只有当你需要调试时才发现有一个奇怪的“小强”在等着你；最后，在运行代码之前，所有 JavaBean 中的方法你只能想象他们长什么样子，你并不能看见。

### 四、代码耦合度增加

当你使用 Lombok 来编写某一个模块的代码后，其余依赖此模块的其他代码都需要引入 Lombok 依赖，同时还需要在 IDE 中安装 Lombok 的插件。虽然 Lombok 的依赖包并不大，但就因为其中一个地方使用了 Lombok ，其余所有的依赖方都要强制加入 Lombok 的 Jar 包，这是一种入侵式的耦合，如果再遇上 JDK 版本问题，这将是一场灾难。

## 总结

本文总结了常用的Java开发工具Lombok的优缺点。

优点是使用注解即可帮忙自动生成代码，大大减少了代码量，使代码非常简洁。

但是并不意味着Lombok的使用没有任何问题，在使用Lombok的过程中，还可能存在对队友不友好、对代码不友好、对调试不友好、对升级不友好等问题。

最重要的是，使用Lombok还会导致破坏封装性的问题。

虽然使用Lombok存在着很多方便，但是也带来了一些问题。

但是到底建不建议在日常开发中使用，我其实保持一个中立的态度，不建议大家过度依赖，也不要求大家一定要彻底不用。

**只要大家在使用的过程中，或者评估要不要在代码中引入Lombok之前，在想到他的优点的同时，能够考虑到他给代码带来的问题的，那么本文的目的也就达到了！**

------

## 参考

参考链接如下：

http://blog.itpub.net/69908877/viewspace-2676272/

