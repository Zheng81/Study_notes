# 一级缓存和二级缓存的理解

## 开篇

1. CPU，即中央处理器，相当于计算机的大脑；
2. CPU 是一块超大规模的集成电路，是一台计算机的运算核心（Core）和控制核心（Control Unit）;
3. CPU 功能主要是解释计算机指令以及处理计算机软件中的数据；
4. 中央处理器主要包括运算器（算数逻辑运算单元，ALU）和高速缓冲存储器（Cache）以及实现他们之间联系的数据（Data）、控制及状态的总线（Bus）;
5. CPU 与内部存储器（Memory）和输入/输出（I/O）设备合称计算机三大核心部件；

> 什么是内存？

内存是计算机中重要的部件之一，它是与CPU进行沟通的桥梁。计算机中所有程序的运行都是在内存中进行的，因此内存的性能对计算机的影响非常大。内存(Memory)也被称为内存储器，其作用是用于暂时存放CPU中的运算数据，以及与硬盘等外部存储器交换的数据。只要计算机在运行中，CPU就会把需要运算的数据调到内存中进行运算，当运算完成后CPU再将结果传送出来，内存的运行也决定了计算机的稳定运行。 内存是由内存芯片、电路板、金手指等部分组成的。

> 什么是缓存？

缓存是CPU的一部分，它存在于CPU中，CPU存取数据的速度非常的快，一秒钟能够存取、处理十亿条指令和数据（术语：CPU主频1G），而内存就慢很多，快的内存能够达到几十兆就不错了，可见两者的速度差异是多么的大。缓存是为了解决CPU速度和内存速度的速度差异问题。内存中被CPU访问最频繁的数据和指令被复制入CPU中的缓存，这样CPU就可以不经常到象“蜗牛”一样慢的内存中去取数据了，CPU只要到缓存中去取就行了，而缓存的速度要比内存快很多。

这里要特别指出的是： 因为缓存只是内存中少部分数据的复制品，所以CPU到缓存中寻找数据时，也会出现找不到的情况（因为这些数据没有从内存复制到缓存中去），这时CPU还是会到内存中去找数据，这样系统的速度就慢下来了，不过CPU会把这些数据复制到缓存中去，以便下一次不要再到内存中去取。 因为随着时间的变化，被访问得最频繁的数据不是一成不变的，也就是说，刚才还不频繁的数据，此时已经需要被频繁的访问，刚才还是最频繁的数据，现在又不频繁了，所以说缓存中的数据要经常按照一定的算法来更换，这样才能保证缓存中的数据是被访问最频繁的。 

## 一级缓存和二级缓存 

为了分清这两个概念，内存有RAM和ROM两种，我们先了解一下RAM(随机存储器) 和ROM（只读存储器）.

RAM和ROM相对的，RAM是掉电以后，其中信息就消失那一种，ROM在掉电以后信息也不会消失那一种,RAM又分两种，

一种是静态RAM：SRAM；一种是动态RAM：DRAM。前者的存储速度要比后者快得多，我们现在使用的内存一般都是动态RAM。 

有的菜鸟就说了，为了增加系统的速度，把缓存扩大不就行了吗，扩大的越大，缓存的数据越多，系统不就越快了吗.缓存通常都是静态RAM，速度是非常的快，但是静态RAM集成度低（存储相同的数据，静态RAM的体积是动态RAM的6倍），价格高（同容量的静态RAM是动态RAM的四倍），由此可见，扩大静态RAM作为缓存是一个非常愚蠢的行为，但是为了提高系统的性能和速度，我们必须要扩大缓存，这样就有了一个折中的方法，不扩大原来的静态RAM缓存，而是增加一些高速动态RAM做为缓存， 这些高速动态RAM速度要比常规动态RAM快，但比原来的静态RAM缓存慢，我们把原来的静态ram缓存叫一级缓存，而把后来增加的动态RAM叫二级缓存。一级缓存和二级缓存中的内容都是内存中访问频率高的数据的复制品（映射），它们的存在都是为了减少高速CPU对慢速内存的访问。 

通常CPU找数据或指令的顺序是：先到一级缓存中找，找不到再到二级缓存中找，如果还找不到就只有到内存中找了