# 操作系统学习（十八）——进程互斥的软件实现方法

## 知识总览

![image-20200804022121534](F:\笔记\操作系统\assets\操作系统学习（十八）.png)

## 单标志法

算法思想：两个进程在<font color="red">**访问完临界区后**</font>会把使用临界区的权限转交给另一个进程。也就是说<font color="red">**每个进程进入临界区的权限只能被另一个进程赋予**</font>

![image-20200804022346287](F:\笔记\操作系统\assets\操作系统学习（十八）-2.png)

![image-20200804022706953](F:\笔记\操作系统\assets\操作系统学习（十八）-3.png)

![image-20200804022808728](F:\笔记\操作系统\assets\操作系统学习（十八）-4.png)

> 单标志法主要违背了：空闲让进

## 双标志先检查法

算法思想：设置一个布尔型数组 flag[]，数组中各个元素用来标记各进程想进入临界区的意愿，比如 “flag[0] = true” 意味着 0 号进程 P0 现在想要进入临界区。每个进程在进入临界区之前先检查当前有没有别的进程想进入临界区，如果没有，则把自身对应的标志 flag[i] 设为 true，之后开始访问临界区。

![image-20200804023733472](F:\笔记\操作系统\assets\操作系统学习（十八）-5.png)

> 双标志先检查法违背：忙则等待

## 双标志后检查法

算法思想：双标志先检查法的改版。前一个算法的问题是先 “检查” 后 “上锁”，但是这两个操作又无法一气呵成，因此导致了两个进程同时进入临界区的问题。因此，人们又想到先 “上锁” 后 “检查” 的方法，来避免上述问题。

![image-20200804024356299](F:\笔记\操作系统\assets\操作系统学习（十八）-6.png)

> 双标志后检查法违背：有限等待、空闲让进，有可能导致 “饥饿” 问题。

## Peterson 算法

算法思想：双标志后检查法中，两个进程都争着想进入临界区，但是谁也不让谁，最后谁都无法进入临界区。Gary L.Peterson 想到了一种方法，如果双方都争着想进入临界区，那可以让进程尝试 “孔融让梨”，主动让对方先使用临界区。

![image-20200804025206838](F:\笔记\操作系统\assets\操作系统学习（十八）-7.png)

![image-20200804025527374](F:\笔记\操作系统\assets\操作系统学习（十八）-8.png)