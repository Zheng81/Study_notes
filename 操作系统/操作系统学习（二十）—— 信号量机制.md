# 操作系统学习（二十）—— 信号量机制

## 知识总览

![image-20200804124318347](F:\笔记\操作系统\assets\操作系统学习（二十）.png)

![image-20200804125337797](F:\笔记\操作系统\assets\操作系统学习（二十）-2.png)

## 信号量机制

用户进程可以通过使用操作系统提供的<font color="red">**一对原语**</font>来对**<font color="red">信号量</font>**进行操作，从而很方便的实现了进程互斥、进程同步。

<font color="red">**信号量**</font>其实就是一个变量（可以是一个整数，也可以是更复杂的记录型变量），可以用一个信号量来<font color="red">**表示系统中某种资源的数量**</font>，比如：系统中只有一台打印机，就可以设置一个初值为 1 的信号量。

<font color="red">**原语**</font>是一种特殊的程序段，其<font color="red">**执行只能一气呵成，不可被中断**</font>。原语是由<font color="red">**关中断/开中断指令**</font>实现的。软件解决方案的主要问题是由 “进入区的各种操作无法一气呵成”，因此如果能吧进入区、退出区的操作都用 “原语” 实现，使这些操作能 “一气呵成” 就能避免问题。

<font color="red">**一对原语**</font>：<font color="red">**wait（S）**</font>原语和 <font color="red">**signal（S）**</font>原语，可以把原语理解为我们自己写的函数，函数名分别为 wait 和 signal，括号里的<font color="red">**信号量 S**</font> 其实就是函数调用时传入的一个参数。

wait、signal 原语常<font color="red">**简称为 P、V 操作**</font>（来自荷兰语 proberen 和 verhogen）。因此，做题的时候常把  wait(S)、signal(S) 两个操作分别写为 <font color="red">**P(S)、V(S)**</font>。

## 信号量机制——整型信号量

用一个<font color="red">**整数型的变量**</font>作为信号量，用来表示系统中某种资源的数量。

> ​	与普通整数变量的区别：对信号量的操作只有三种，即初始化、P操作、V操作

Eg：某计算机系统中有一台打印机。。。

![image-20200804132746233](F:\笔记\操作系统\assets\操作系统学习（二十）-3.png)

## 信号量机制——记录型信号量

整型信号量的缺陷是存在 “忙等” 问题，因此人们又提出了 “记录型信号量” ，即用记录型数据结构表示的信号量。

![image-20200804133118702](F:\笔记\操作系统\assets\操作系统学习（二十）-4.png)

![image-20200804133946479](F:\笔记\操作系统\assets\操作系统学习（二十）-5.png)	

![image-20200804134227755](F:\笔记\操作系统\assets\操作系统学习（二十）-6.png)