# 操作系统学习（十六）——调度算法：时间片轮转、优先级调度、多级反馈队列调度算法

> Tips：各种调度算法的学习思路
>
> 1. 算法思想
> 2. 算法规则
> 3. 这种调度算法是用于 作业调度 还是 进程调度？
> 4. 抢占式？非抢占式？
> 5. 优点和缺点
> 6. 是否会导致 <font color="red">**饥饿**</font>。

## 知识总览

![image-20200804020209735](F:\笔记\操作系统\assets\操作系统学习（十六）.png)

## 时间片轮转（RR，Round-Robin）

![image-20200804011138453](F:\笔记\操作系统\assets\操作系统学习（十六）-2.png)



![image-20200804011221738](F:\笔记\操作系统\assets\操作系统学习（十六）-3.png)



![image-20200804011257060](F:\笔记\操作系统\assets\操作系统学习（十六）-4.png)

![image-20200804011343968](F:\笔记\操作系统\assets\操作系统学习（十六）-5.png)

![image-20200804011442813](F:\笔记\操作系统\assets\操作系统学习（十六）-6.png)

如果<font color="red">**时间片太大**</font>，使得每个进程都可以在一个时间片内就完成，则时间片轮转调度算法<font color="red">**退化为先来先服务**</font>调度算法，并且<font color="red">**会增大进程响应时间**</font>。因此<font color="red">**时间片不能太大**</font>。

另一方面，进程调度、切换是有时间代价的（保存、恢复运行环境），因此如果<font color="red">**时间片太小**</font>，会导致<font color="red">**进程切换过于频繁**</font>，系统会花大量的时间来处理进程切换，从而导致实际用于进程执行的时间比例减少。可见<font color="red">时间片也不能太小</font>。

> 比如：系统中有10个进程在并发执行，如果时间片为1秒，则一个进程被响应可能需要等9秒...也就是说，如果用户在自己进程的时间片外通过键盘发出调式命令，可能需要等待9秒才能被系统响应。

* 一般来说，设计时间片时要让切换进程的开销占比不超过 1%。

![image-20200804012338581](F:\笔记\操作系统\assets\操作系统学习（十六）-7.png)

## 优先级调度算法

![image-20200804012732918](F:\笔记\操作系统\assets\操作系统学习（十六）-8.png)

![image-20200804013022855](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200804013022855.png)

**补充：**

就绪队列未必只有一个，可以按照不同优先级来组织。另外，也可以把优先级高的进程排在更靠近队头的位置

根据优先级是否可以动态改变，可将优先级分为<font color="red">**静态优先级**</font>和<font color="red">**动态优先级**</font>两种。

静态优先级：创建进程时确定，之后一直不变。

动态优先级：创建进程时有一个初始值，之后会根据情况动态地调整优先级。

> 如何合理地设置各类进程的优先级？
>
> ​	通常：系统进程优先级 <font color="red">**高于**</font> 用户进程
>
> ​				前台进程优先级 <font color="red">**高于**</font> 后台进程
>
> ​				操作系统更<font color="red">**偏好 I/O 型进程（或称 I/O 繁忙型进程）**</font>
>
> （I/O设备和 CPU 可以并行工作。如果优先让 I/O 繁忙型进程优先运行的话，则越有可能让 I/O设备尽早地投入工作，则资源利用率、系统吞吐量都会得到提升）
>
> 注：与 I/O 型进程相对的是计算型进程（或称CPU繁忙型进程）
>
> 如果采用的是动态优先级，什么时候应该调整？
>
> ​	可以从追求公平、提升资源利用率等角度考虑
>
> ​	如果某进程在就绪队列中等待了很长时间，则可以适当提升其优先级
>
> ​	如果某进程占用处理机运行了很长时间，则可以适当降低其优先级

![image-20200804014339923](F:\笔记\操作系统\assets\操作系统学习（十六）-9.png)

## 多级反馈队列调度算法

>看多级反馈队列调度算法的话，需要注意的是**算法规则**

![image-20200804014434535](F:\笔记\操作系统\assets\操作系统学习（十六）-11.png)

![image-20200804015553080](F:\笔记\操作系统\assets\操作系统学习（十六）-10.png)

![image-20200804015944421](F:\笔记\操作系统\assets\操作系统学习（十六）-12.png)