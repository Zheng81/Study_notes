# 操作系统学习（二十七）——管程

## 知识总览

![image-20200806134657819](F:\笔记\操作系统\assets\操作系统学习（二十七）.png)

## 为什么要引入管程

![image-20200806141426744](F:\笔记\操作系统\assets\操作系统学习（二十七）-2.png)

## 管程的定义和基本特征

管程是一种特殊的软件模块，有这些部分组成：

1. 局部于管程的<font color="red">**共享数据结构**</font>说明；
2. 对该数据结构进行操作的<font color="red">**一组过程**</font>；
3. 对局部于管程的共享数据设置初始值的语句；
4. 管程有一个名字。

> “过程”其实就是所谓的 函数

管程的基本特征：

1. 局部于管程的数据只能被局部于管程的过程所访问；
2. 一个进程只能通过调用管程内的过程才能进入管程访问共享数据；
3. <font color="red">**每次仅允许一个进程在管理内执行某个内部过程**</font>。

## 拓展1：用管程解决生产者消费者问题

![image-20200806142812829](F:\笔记\操作系统\assets\操作系统学习（二十七）-4.png)

> 管程中设置条件变量和等待/唤醒操作，可以解决同步问题。

![image-20200806143433685](F:\笔记\操作系统\assets\操作系统学习（二十七）-3.png)

## 拓展2：Java中类似于管程的机制

Java中，如果用关键字 <font color="red">**synchronized**</font> 来描述一个函数，那么这个函数同一时间段内只能被一个线程调用 

![image-20200806143638543](F:\笔记\操作系统\assets\操作系统学习（二十七）-5.png)